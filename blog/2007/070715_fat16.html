<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="keywords" content="programming, fat16, c, assembler" />
  <title>Félix Albertos Marco</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="/jab.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Félix Albertos Marco</h1>
<p class="subtitle">Fat16 - Visual Interface</p>
<p class="date">15/07/2007</p>
</header>
<p><strong><a href="/">Home</a>/<a href="/blog/">blog</a>/<a
href="/blog/2007/">2007</a>&gt;</strong></p>
<h2>
Fat16 - Visual Interface
</h2>
<p><em>[<a href="/assembler.html">assembler</a>] [<a
href="/c.html">c</a>] [<a href="/fat16.html">fat16</a>] [<a
href="/programming.html">programming</a>]</em></p>
<p><img src="/img/DISVIS.png" /></p>
<p>Siguiendo con las prácticas de Periféricos, también con carácter
voluntario y como ampliación de una práctica en curso que consistía en
la implementación de la orden DIR sobre un disco son sistema de archivos
FAT, programé una interfaz visual que permite inspeccionar el contenido
del disco.</p>
<p>Representa el conjunto de bloques del disco, permitiendo desplazarse
sobre ellos e ir visualizando el contenido de los mismos. Todo el acceso
es a bajo nivel, sin librerías externas. Permite buscar archivos y
directorios por nombre mostrando su ubicación en el disco.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* F‚lix Albertos Marco */</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">/* Editor de memoria */</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* Permite acceder a la memoria RAM para modificarla */</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* Modificado para modificar caracteres y activarlos */</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;dos.h&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;conio.h&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;..\perlib.h&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* Global para tener inicio video y no a¤adir par metro */</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> dircar<span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* imp_xx_dir/pun */</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* imprime tipo pasando segmento:offset / char*  en la coordenada dada*/</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_byte_dir<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">unsigned</span> seg<span class="op">,</span><span class="dt">unsigned</span> off<span class="op">,</span><span class="dt">char</span> resalta<span class="op">);</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_byte_pun<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">char</span> far<span class="op">*</span> p<span class="op">,</span><span class="dt">char</span> resalta<span class="op">);</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_int_dir<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">unsigned</span> seg<span class="op">,</span><span class="dt">unsigned</span> off<span class="op">);</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_int_pun<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">char</span> far<span class="op">*</span> p<span class="op">);</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_char_dir<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">unsigned</span> seg<span class="op">,</span><span class="dt">unsigned</span> off<span class="op">);</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_char_pun<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">char</span> far<span class="op">*</span> p<span class="op">);</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co">/* imp_pantalla_ imprime informaci¢n en pantalla*/</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_pantalla_pun<span class="op">(</span><span class="dt">char</span> lin<span class="op">,</span><span class="dt">char</span> col<span class="op">,</span><span class="dt">char</span> far<span class="op">*</span> p<span class="op">,</span><span class="dt">char</span> modo<span class="op">,</span><span class="dt">char</span> pos<span class="op">);</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_pantalla_dir<span class="op">(</span><span class="dt">char</span> lin<span class="op">,</span><span class="dt">char</span> col<span class="op">,</span><span class="dt">unsigned</span> seg<span class="op">,</span><span class="dt">unsigned</span> off<span class="op">,</span><span class="dt">char</span> modo<span class="op">,</span><span class="dt">char</span> pos<span class="op">);</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* lee teclado y modifica par metros seg£n tecla pulsada  */</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> actua_teclado<span class="op">(</span><span class="dt">char</span><span class="op">**</span> p<span class="op">,</span><span class="dt">char</span><span class="op">*</span> pos<span class="op">,</span><span class="dt">char</span><span class="op">*</span> modo<span class="op">,</span><span class="dt">char</span><span class="op">*</span> col<span class="op">,</span><span class="dt">char</span><span class="op">*</span> lin<span class="op">);</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co">/* borra cuadrado en pantalla a partir de esquina i hasta esquina f */</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> pantalla_borra<span class="op">(</span><span class="dt">char</span> ix<span class="op">,</span><span class="dt">char</span> iy<span class="op">,</span><span class="dt">char</span> fx<span class="op">,</span><span class="dt">char</span> fy<span class="op">);</span> </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> c<span class="op">,</span>modo<span class="op">,</span>lin<span class="op">,</span>col<span class="op">,</span>pos<span class="op">;</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> cadena<span class="op">[]=</span><span class="st">&quot;holaio&quot;</span><span class="op">;</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> p<span class="op">;</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>copia_caracteres_ram<span class="op">(&amp;</span>dircar<span class="op">);</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>p<span class="op">=&amp;</span>cadena<span class="op">;</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    col<span class="op">=</span><span class="dv">5</span><span class="op">;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    lin<span class="op">=</span><span class="dv">22</span><span class="op">;</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    modo<span class="op">=</span><span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    pos<span class="op">=</span><span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    clrscr<span class="op">();</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    gotoxy<span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">25</span><span class="op">);</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[d] direccion [c columnas] [m] modo [a] activa video [s] salir&quot;</span><span class="op">);</span>   </span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        imp_pantalla_pun<span class="op">(</span>lin<span class="op">,</span>col<span class="op">,</span>p<span class="op">,</span>modo<span class="op">,</span>pos<span class="op">);</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>        delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>kbhit<span class="op">())</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>            c<span class="op">=</span>actua_teclado<span class="op">(&amp;</span>p<span class="op">,&amp;</span>pos<span class="op">,&amp;</span>modo<span class="op">,&amp;</span>col<span class="op">,&amp;</span>lin<span class="op">);</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span><span class="cf">while</span><span class="op">(</span>c<span class="op">!=</span><span class="ch">&#39;s&#39;</span><span class="op">);</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_byte_dir<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">unsigned</span> seg<span class="op">,</span><span class="dt">unsigned</span> off<span class="op">,</span><span class="dt">char</span> resalta<span class="op">)</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> i<span class="op">;</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> p<span class="op">=</span>MK_FP<span class="op">(</span>seg<span class="op">,</span>off<span class="op">);</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span>i<span class="op">=</span><span class="dv">7</span><span class="op">;</span>i<span class="op">&gt;=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">--)</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>        caracter<span class="op">(</span>x<span class="op">+</span><span class="dv">7</span><span class="op">-</span>i<span class="op">,</span>y<span class="op">,</span>UTIL_caracter_consultar_bit<span class="op">(</span>p<span class="op">,</span>i<span class="op">)+</span><span class="ch">&#39;0&#39;</span><span class="op">,</span><span class="dv">4</span><span class="op">,(</span><span class="dv">5</span><span class="op">+</span>resalta<span class="op">)+</span>resalta<span class="op">*</span><span class="dv">8</span><span class="op">);</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span><span class="op">(</span>resalta<span class="op">)</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>        gotoxy<span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">24</span><span class="op">);</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%p</span><span class="st">&quot;</span><span class="op">,</span>p<span class="op">);</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_byte_pun<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">char</span> far<span class="op">*</span> p<span class="op">,</span><span class="dt">char</span> resalta<span class="op">)</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>    imp_byte_dir<span class="op">(</span>x<span class="op">,</span>y<span class="op">,</span>FP_SEG<span class="op">(</span>p<span class="op">),</span>FP_OFF<span class="op">(</span>p<span class="op">),</span>resalta<span class="op">);</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_int_dir<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">unsigned</span> seg<span class="op">,</span><span class="dt">unsigned</span> off<span class="op">)</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> p<span class="op">=</span>MK_FP<span class="op">(</span>seg<span class="op">,</span>off<span class="op">);</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    gotoxy<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>    i<span class="op">=*</span>p<span class="op">;</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%i</span><span class="st">&quot;</span><span class="op">,(</span>i<span class="op">&amp;</span><span class="dv">127</span><span class="op">)+((</span>i<span class="op">&gt;&gt;</span><span class="dv">7</span><span class="op">)&amp;</span><span class="dv">1</span><span class="op">)*</span><span class="dv">128</span><span class="op">);</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_int_pun<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">char</span> far<span class="op">*</span> p<span class="op">)</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    imp_int_dir<span class="op">(</span>x<span class="op">,</span>y<span class="op">,</span>FP_SEG<span class="op">(</span>p<span class="op">),</span>FP_OFF<span class="op">(</span>p<span class="op">));</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_char_dir<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">unsigned</span> seg<span class="op">,</span><span class="dt">unsigned</span> off<span class="op">)</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> p<span class="op">=</span>MK_FP<span class="op">(</span>seg<span class="op">,</span>off<span class="op">);</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> c<span class="op">=*</span>p<span class="op">;</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    caracter<span class="op">(</span>x<span class="op">-</span><span class="dv">1</span><span class="op">,</span>y<span class="op">,*</span>p<span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">7</span><span class="op">);</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_char_pun<span class="op">(</span><span class="dt">char</span> x<span class="op">,</span><span class="dt">char</span> y<span class="op">,</span><span class="dt">char</span> far<span class="op">*</span> p<span class="op">)</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    imp_char_dir<span class="op">(</span>x<span class="op">,</span>y<span class="op">,</span>FP_SEG<span class="op">(</span>p<span class="op">),</span>FP_OFF<span class="op">(</span>p<span class="op">));</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_pantalla_pun<span class="op">(</span><span class="dt">char</span> lin<span class="op">,</span><span class="dt">char</span> col<span class="op">,</span><span class="dt">char</span> far<span class="op">*</span> p<span class="op">,</span><span class="dt">char</span> modo<span class="op">,</span><span class="dt">char</span> pos<span class="op">)</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    imp_pantalla_dir<span class="op">(</span>lin<span class="op">,</span>col<span class="op">,</span>FP_SEG<span class="op">(</span>p<span class="op">),</span>FP_OFF<span class="op">(</span>p<span class="op">),</span>modo<span class="op">,</span>pos<span class="op">);</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> imp_pantalla_dir<span class="op">(</span><span class="dt">char</span> lin<span class="op">,</span><span class="dt">char</span> col<span class="op">,</span><span class="dt">unsigned</span> seg<span class="op">,</span><span class="dt">unsigned</span> off<span class="op">,</span><span class="dt">char</span> modo<span class="op">,</span><span class="dt">char</span> pos<span class="op">)</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> far<span class="op">*</span> p<span class="op">=</span>MK_FP<span class="op">(</span>seg<span class="op">,</span>off<span class="op">);</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="co">/* Imprime linea direcci¢n*/</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span>i<span class="op">=</span><span class="dv">1</span><span class="op">;</span>i<span class="op">&lt;=</span>lin<span class="op">;</span>i<span class="op">++)</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>        gotoxy<span class="op">(</span><span class="dv">1</span><span class="op">,</span>i<span class="op">);</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%p</span><span class="st">&quot;</span><span class="op">,</span>p<span class="op">+(</span>i<span class="op">-</span><span class="dv">1</span><span class="op">)*</span>col<span class="op">);</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a><span class="co">/* Imprime caracteres a partir direcci¢n que marca cursor */</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span>i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span><span class="dv">80</span><span class="op">;</span>i<span class="op">++)</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>        caracter<span class="op">(</span>i<span class="op">,</span><span class="dv">22</span><span class="op">,*(</span>p<span class="op">+</span>i<span class="op">+</span>pos<span class="op">),</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a><span class="co">/* Imprime bytes memoria */</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span>i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">/</span>col<span class="op">&lt;</span>lin<span class="op">;</span>i<span class="op">++)</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span>   </span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        <span class="co">/*byte*/</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>        imp_byte_pun<span class="op">((</span>i<span class="op">%</span>col<span class="op">)*</span><span class="dv">11</span><span class="op">+</span><span class="dv">10</span><span class="op">,</span>i<span class="op">/</span>col<span class="op">,</span>p<span class="op">,</span>pos<span class="op">==</span>i<span class="op">);</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>        <span class="cf">switch</span><span class="op">(</span>modo<span class="op">)</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="dv">0</span><span class="op">:</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>                <span class="co">/*hexadecimal*/</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>                gotoxy<span class="op">((</span>i<span class="op">%</span>col<span class="op">)*</span><span class="dv">11</span><span class="op">+</span><span class="dv">19</span><span class="op">,</span>i<span class="op">/</span>col<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%x</span><span class="st">&quot;</span><span class="op">,((*</span>p<span class="op">)&gt;&gt;</span><span class="dv">4</span><span class="op">)&amp;</span><span class="dv">15</span><span class="op">);</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%x</span><span class="st">&quot;</span><span class="op">,(*</span>p<span class="op">)&amp;</span><span class="dv">15</span><span class="op">);</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>                <span class="co">/*caracter*/</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>                imp_char_pun<span class="op">((</span>i<span class="op">%</span>col<span class="op">)*</span><span class="dv">11</span><span class="op">+</span><span class="dv">21</span><span class="op">,</span>i<span class="op">/</span>col<span class="op">,</span>p<span class="op">);</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>                <span class="co">/*decimal*/</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>                imp_int_pun<span class="op">((</span>i<span class="op">%</span>col<span class="op">)*</span><span class="dv">11</span><span class="op">+</span><span class="dv">19</span><span class="op">,</span>i<span class="op">/</span>col<span class="op">,</span>p<span class="op">);</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>        p<span class="op">++;</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> actua_teclado<span class="op">(</span><span class="dt">char</span><span class="op">**</span> p<span class="op">,</span><span class="dt">char</span><span class="op">*</span> pos<span class="op">,</span><span class="dt">char</span><span class="op">*</span> modo<span class="op">,</span><span class="dt">char</span><span class="op">*</span> col<span class="op">,</span><span class="dt">char</span><span class="op">*</span> lin<span class="op">)</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> c<span class="op">;</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> cad<span class="op">[</span><span class="dv">255</span><span class="op">];</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>        gotoxy<span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">24</span><span class="op">);</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>        c<span class="op">=</span>getch<span class="op">();</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a><span class="co">/* edici¢n de bytes */</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(</span>c<span class="op">&gt;=</span><span class="ch">&#39;1&#39;</span> <span class="op">&amp;&amp;</span> c<span class="op">&lt;=</span><span class="ch">&#39;8&#39;</span><span class="op">)</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>            <span class="op">*(*</span>p<span class="op">+(*</span>pos<span class="op">))=*(*</span>p<span class="op">+(*</span>pos<span class="op">))^(</span><span class="dv">1</span><span class="op">&lt;&lt;(</span><span class="dv">8</span><span class="op">-(</span>c<span class="op">-</span><span class="ch">&#39;0&#39;</span><span class="op">)));</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a><span class="co">/**/</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>        <span class="cf">switch</span><span class="op">(</span>c<span class="op">)</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;l&#39;</span><span class="op">:</span> <span class="co">/* avanza linea */</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span>p<span class="op">=*</span>p<span class="op">+(*</span>col<span class="op">);</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;o&#39;</span><span class="op">:</span> <span class="co">/* retrocede linea  */</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span>p<span class="op">=*</span>p<span class="op">-(*</span>col<span class="op">);</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;p&#39;</span><span class="op">:</span> <span class="co">/* retrocede p gina  */</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span>p<span class="op">=*</span>p<span class="op">-((*</span>lin<span class="op">)*(*</span>col<span class="op">));</span></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;¤&#39;</span><span class="op">:</span> <span class="co">/* avanza p gina  */</span></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span>p<span class="op">=*</span>p<span class="op">+((*</span>lin<span class="op">)*(*</span>col<span class="op">));</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;c&#39;</span><span class="op">:</span> <span class="co">/* modifica n§ columnas  */</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;N§ columnas: &quot;</span><span class="op">);</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,&amp;(*</span>col<span class="op">));</span></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>                <span class="op">(*</span>pos<span class="op">)=</span><span class="dv">0</span><span class="op">;</span> <span class="co">/* cursor se podr¡a salir l¡mites */</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>                pantalla_borra<span class="op">(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">79</span><span class="op">,</span><span class="dv">23</span><span class="op">);</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;d&#39;</span><span class="op">:</span> <span class="co">/* modifica segmento y offset comienzo */</span></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;XXXX:YYYY : &quot;</span><span class="op">);</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%p</span><span class="st">&quot;</span><span class="op">,&amp;(*</span>p<span class="op">));</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>                pantalla_borra<span class="op">(</span><span class="dv">0</span><span class="op">,</span><span class="dv">23</span><span class="op">,</span><span class="dv">20</span><span class="op">,</span><span class="dv">23</span><span class="op">);</span></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;m&#39;</span><span class="op">:</span> <span class="co">/* visualiza byte+char / decimal(1 byte)*/</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">(*</span>modo<span class="op">)</span> <span class="op">*</span>modo<span class="op">=</span><span class="dv">0</span><span class="op">;</span><span class="cf">else</span> <span class="op">*</span>modo<span class="op">=</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>                pantalla_borra<span class="op">(</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">79</span><span class="op">,</span><span class="dv">23</span><span class="op">);</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;a&#39;</span><span class="op">:</span> <span class="co">/* activa juego caracteres modificado */</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a>                activa_caracteres_ram<span class="op">(</span>dircar<span class="op">);</span></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a><span class="co">/* manejo del cursor */</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;u&#39;</span><span class="op">:</span> <span class="co">/* arriba */</span></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">((*</span>pos<span class="op">)/(*</span>col<span class="op">))</span> <span class="op">*</span>pos<span class="op">=*</span>pos<span class="op">-*</span>col<span class="op">;</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;j&#39;</span><span class="op">:</span> <span class="co">/* abajo  */</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">((*</span>pos<span class="op">)/(*</span>col<span class="op">)&lt;(*</span>lin<span class="op">)-</span><span class="dv">1</span><span class="op">)</span> <span class="op">*</span>pos<span class="op">=*</span>pos<span class="op">+(*</span>col<span class="op">);</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;k&#39;</span><span class="op">:</span> <span class="co">/* derecha */</span></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">(*</span>pos<span class="op">&lt;((*</span>col<span class="op">)*(*</span>lin<span class="op">))-</span><span class="dv">1</span><span class="op">)</span> <span class="op">(*</span>pos<span class="op">)++;</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="ch">&#39;h&#39;</span><span class="op">:</span> <span class="co">/* izquierda */</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span><span class="op">(*</span>pos<span class="op">)</span> <span class="op">(*</span>pos<span class="op">)--;</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a><span class="co">/*0..79 / 0..23 */</span></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> pantalla_borra<span class="op">(</span><span class="dt">char</span> ix<span class="op">,</span><span class="dt">char</span> iy<span class="op">,</span><span class="dt">char</span> fx<span class="op">,</span><span class="dt">char</span> fy<span class="op">)</span></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> far<span class="op">*</span> p<span class="op">=</span>MK_FP<span class="op">(</span><span class="bn">0xB800</span><span class="op">,</span><span class="bn">0000</span><span class="op">);</span></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x<span class="op">,</span>y<span class="op">,</span>i<span class="op">;</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>    ix<span class="op">=</span>ix<span class="op">;</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>    fx<span class="op">=</span>fx<span class="op">;</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>    p<span class="op">=</span>p<span class="op">+</span>iy<span class="op">*</span><span class="dv">160</span><span class="op">;</span></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span><span class="op">(</span>y<span class="op">=</span>iy<span class="op">;</span>y<span class="op">&lt;=</span>fy<span class="op">;</span>y<span class="op">++)</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span><span class="op">(</span>x<span class="op">=</span>ix<span class="op">;</span>x<span class="op">&lt;=</span>fx<span class="op">;</span>x<span class="op">++)</span></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a>            <span class="op">*(</span>p<span class="op">+(</span>x<span class="op">*</span><span class="dv">2</span><span class="op">))=</span><span class="dv">32</span><span class="op">;</span></span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>            <span class="op">*(</span>p<span class="op">+</span><span class="dv">1</span><span class="op">+(</span>x<span class="op">*</span><span class="dv">2</span><span class="op">))=</span><span class="dv">7</span><span class="op">;</span></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>        p<span class="op">=</span>p<span class="op">+</span><span class="dv">160</span><span class="op">;</span></span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
</body>
</html>
